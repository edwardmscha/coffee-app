# 커피 주문 앱

## 1. 프로젝트 개요

### 1.1 프로젝트명
커피 주문 앱

### 1.2 프로젝트 목적
사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹 앱

### 1.3 개발 범위
- 주문하기 메뉴(메뉴 선택 및 장바구니 기능)
- 관리자 화면 (재고 관리 및 주ㄴ 상태 관리)
- 데이터를 생성/조회/수정/삭제할 수 있는 기ㅇ

##2. 기술 선택
- 프런트엔드: HTML, CSS, 리액트, 자바스크립트
- 백엔드: Node.js, Express
- 데이터베이스: Postgre SQL

### 3. 기본 사항
- 프런트엔드와 백엔드를 따로 개발
- 기본적인 웹 기술만 사용
- 학습 목적이므로 사용자 인증이나 결제 기능은 제외
- 메뉴는 커피 메뉴만 있음

## 4. 기능 명세

### 4.1 주문하기 화면

#### 4.1.1 화면 구성
주문하기 화면은 크게 3개의 섹션으로 구성됩니다:
1. **헤더 영역 (Header)**
2. **메뉴 아이템 영역 (Menu Items Section)**
3. **장바구니 영역 (Shopping Cart Section)**

#### 4.1.2 헤더 영역

**구성 요소:**
- **로고**: 좌측 상단에 "COZY" 브랜드명 표시
  - 스타일: 어두운 녹색 배경의 사각형 박스
- **네비게이션 버튼**: 우측 상단에 2개의 버튼 배치
  - **주문하기 버튼**: 현재 화면을 나타내는 버튼 (선택된 상태)
  - **관리자 버튼**: 관리자 화면으로 이동하는 버튼
  - 스타일: 밝은 회색 배경에 어두운 녹색 테두리

**기능:**
- 관리자 버튼 클릭 시 관리자 화면으로 전환

#### 4.1.3 메뉴 아이템 영역

**레이아웃:**
- 메뉴 아이템 카드들이 가로로 배치됨 (그리드 레이아웃)
- 각 카드는 동일한 구조와 스타일을 가짐

**메뉴 카드 구성 요소:**
각 메뉴 카드는 다음 요소들을 포함합니다:

1. **제품 이미지**
   - 위치: 카드 상단
   - 스타일: 흰색 배경 사각형 영역
   - 상태: 이미지가 없을 경우 placeholder 표시

2. **제품 정보**
   - **제품명**: 굵은 글씨로 표시 (예: "아메리카노(ICE)", "아메리카노(HOT)", "카페라떼")
   - **가격**: 원화 단위로 표시 (예: "4,000원", "5,000원")
   - **설명**: 간단한 제품 설명 텍스트 (예: "간단한 설명...")

3. **옵션 선택**
   - 체크박스 형태의 옵션 선택 UI
   - 각 옵션은 옵션명과 추가 가격을 함께 표시
   - 예시 옵션:
     - "샷 추가 (+500원)"
     - "시럽 추가 (+0원)"
   - 여러 옵션을 동시에 선택 가능

4. **담기 버튼**
   - 위치: 카드 하단
   - 텍스트: "담기"
   - 스타일: 밝은 회색 배경의 사각형 버튼

**기능:**
- 옵션 선택 시 해당 옵션의 추가 가격이 최종 가격에 반영됨
- "담기" 버튼 클릭 시:
  - 선택된 옵션 정보와 함께 해당 메뉴가 장바구니에 추가됨
  - 동일한 메뉴와 옵션 조합이 이미 장바구니에 있으면 수량이 증가함
  - 장바구니 영역이 업데이트되어 새로 추가된 항목이 표시됨

#### 4.1.4 장바구니 영역

**레이아웃:**
- 화면 하단에 고정되어 표시
- 스타일: 밝은 회색 배경에 어두운 회색 테두리의 박스

**구성 요소:**

1. **장바구니 제목**
   - 위치: 영역 좌측 상단
   - 텍스트: "장바구니"

2. **장바구니 아이템 목록**
   - 장바구니에 담긴 각 아이템은 다음 정보를 표시:
     - **제품명**: 메뉴 이름
     - **옵션 정보**: 선택된 옵션이 있으면 괄호 안에 표시 (예: "(샷 추가)")
     - **수량**: "X 1", "X 2" 형식으로 표시
     - **가격**: 해당 아이템의 총 가격 (옵션 가격 포함, 예: "4,500원", "8,000원")
   - 예시 표시 형식:
     - "아메리카노(ICE) (샷 추가) X 1 - 4,500원"
     - "아메리카노(HOT) X 2 - 8,000원"

3. **총 금액**
   - 텍스트: "총 금액"
   - 금액: 모든 장바구니 아이템의 가격 합계 (굵은 글씨로 강조, 예: "12,500원")
   - 위치: 장바구니 아이템 목록 하단

4. **주문하기 버튼**
   - 위치: 총 금액 하단
   - 텍스트: "주문하기"
   - 스타일: 밝은 회색 배경에 어두운 회색 테두리의 사각형 버튼

**기능:**
- 장바구니가 비어있을 때:
  - 빈 장바구니 상태를 표시 (예: "장바구니가 비어있습니다")
  - 주문하기 버튼은 비활성화되거나 숨김 처리
- 장바구니 아이템이 있을 때:
  - 모든 아이템의 정보와 가격이 정확히 계산되어 표시됨
  - 총 금액이 실시간으로 계산되어 표시됨
- 주문하기 버튼 클릭 시:
  - 주문이 서버로 전송됨
  - 주문 성공 시 장바구니가 비워짐
  - 주문 완료 메시지 표시 (토스트 메시지 또는 알림)

#### 4.1.5 상호작용 및 상태 관리

**데이터 흐름:**
1. 페이지 로드 시 서버에서 메뉴 목록을 가져와 화면에 표시
2. 사용자가 메뉴를 선택하고 옵션을 선택한 후 "담기" 클릭
3. 선택된 메뉴와 옵션 정보가 로컬 상태(또는 전역 상태)에 저장
4. 장바구니 영역이 즉시 업데이트되어 새로운 아이템이 표시
5. 총 금액이 자동으로 재계산되어 표시

**상태 관리 항목:**
- 메뉴 목록 (서버에서 가져온 데이터)
- 장바구니 아이템 목록
  - 각 아이템 정보: 제품 ID, 제품명, 옵션 목록, 수량, 개별 가격
- 총 금액 (계산된 값)

**예외 처리:**
- 메뉴 목록 로드 실패 시 에러 메시지 표시
- 장바구니에 아이템 추가 실패 시 알림 표시
- 주문 요청 실패 시 에러 메시지 표시 및 장바구니 유지

#### 4.1.6 UI/UX 요구사항

**반응형 디자인:**
- 데스크톱: 메뉴 카드들이 가로로 여러 개 배치
- 모바일: 메뉴 카드들이 세로로 스택되어 배치
- 장바구니는 모든 화면 크기에서 하단에 고정

**색상 스키마:**
- 주 색상: 어두운 녹색 (로고, 버튼 테두리)
- 배경색: 밝은 회색 (버튼, 장바구니)
- 테두리: 어두운 녹색 또는 어두운 회색

**사용자 경험:**
- 버튼 클릭 시 시각적 피드백 제공 (hover, active 상태)
- 장바구니에 아이템 추가 시 즉각적인 시각적 피드백
- 주문 완료 시 명확한 성공 메시지 표시
- 로딩 중일 때 적절한 로딩 인디케이터 표시

#### 4.1.7 기술적 요구사항

**API 엔드포인트:**
- `GET /api/menus`: 메뉴 목록 조회
- `POST /api/orders`: 주문 생성

**데이터 구조:**
```javascript
// 메뉴 아이템
{
  id: number,
  name: string,
  price: number,
  description: string,
  imageUrl: string,
  options: [
    {
      id: number,
      name: string,
      additionalPrice: number
    }
  ]
}

// 장바구니 아이템
{
  menuId: number,
  menuName: string,
  selectedOptions: [optionId],
  quantity: number,
  totalPrice: number
}
```

### 4.2 관리자 화면

#### 4.2.1 화면 구성
관리자 화면은 크게 4개의 섹션으로 구성됩니다:
1. **헤더 영역 (Header)**
2. **관리자 대시보드 요약 (Dashboard Summary)**
3. **재고 현황 (Inventory Status)**
4. **주문 현황 (Order Status)**

#### 4.2.2 헤더 영역

**구성 요소:**
- **로고**: 좌측 상단에 "COZY" 브랜드명 표시
  - 스타일: 어두운 테두리의 사각형 박스
- **네비게이션 버튼**: 우측 상단에 2개의 버튼 배치
  - **주문하기 버튼**: 주문하기 화면으로 이동하는 버튼
  - **관리자 버튼**: 현재 화면을 나타내는 버튼 (선택된 상태 - 어두운 테두리로 강조)
  - 스타일: 밝은 배경에 어두운 테두리

**기능:**
- 주문하기 버튼 클릭 시 주문하기 화면으로 전환
- 관리자 버튼은 현재 페이지임을 시각적으로 표시

#### 4.2.3 관리자 대시보드 요약

**레이아웃:**
- 화면 상단에 위치
- 제목: "관리자 대시보드"

**구성 요소:**
주문 통계를 한눈에 볼 수 있는 요약 정보를 표시합니다:

- **총 주문**: 전체 주문 건수
- **주문 접수**: 접수 완료된 주문 건수
- **제조 중**: 현재 제조 진행 중인 주문 건수
- **제조 완료**: 제조가 완료된 주문 건수

**표시 형식:**
"총 주문 1 / 주문 접수 1 / 제조 중 0 / 제조 완료 0" 형식으로 표시

**기능:**
- 페이지 로드 시 서버에서 최신 주문 통계 데이터를 가져와 표시
- 주문 상태가 변경될 때마다 실시간으로 업데이트 (또는 주기적 갱신)
- 각 통계 수치는 숫자로 명확하게 표시

**데이터 소스:**
- 서버 API를 통해 주문 상태별 집계 데이터를 조회

#### 4.2.4 재고 현황

**레이아웃:**
- 대시보드 요약 섹션 하단에 위치
- 제목: "재고 현황"
- 메뉴별 재고 카드들이 가로로 배치됨 (그리드 레이아웃)

**재고 카드 구성 요소:**
각 재고 카드는 다음 요소들을 포함합니다:

1. **메뉴명**
   - 위치: 카드 상단
   - 스타일: 굵은 글씨로 표시
   - 예시: "아메리카노 (ICE)", "아메리카노 (HOT)", "카페라떼"

2. **현재 재고 수량**
   - 위치: 메뉴명 하단
   - 형식: 숫자 + "개" (예: "10개")
   - 스타일: 명확하게 읽을 수 있는 크기와 색상

3. **재고 조정 버튼**
   - 위치: 재고 수량 하단
   - 구성:
     - **증가 버튼 (+)**: 재고 수량을 1씩 증가
     - **감소 버튼 (-)**: 재고 수량을 1씩 감소
   - 스타일: 작은 크기의 버튼으로 배치

**기능:**
- "+" 버튼 클릭 시:
  - 해당 메뉴의 재고 수량이 1 증가
  - 변경된 재고가 즉시 화면에 반영
  - 서버에 재고 업데이트 요청 전송
- "-" 버튼 클릭 시:
  - 해당 메뉴의 재고 수량이 1 감소 (단, 0 이하로 내려가지 않도록 제한)
  - 변경된 재고가 즉시 화면에 반영
  - 서버에 재고 업데이트 요청 전송
- 재고 업데이트 성공 시:
  - 화면에 성공 피드백 표시 (토스트 메시지 또는 시각적 표시)
- 재고 업데이트 실패 시:
  - 에러 메시지 표시
  - 화면의 재고 수량을 원래 값으로 되돌림

**예외 처리:**
- 재고가 0일 때 "-" 버튼은 비활성화 또는 클릭 시 경고 메시지 표시
- 재고 업데이트 API 호출 실패 시 에러 처리 및 롤백

#### 4.2.5 주문 현황

**레이아웃:**
- 재고 현황 섹션 하단에 위치
- 제목: "주문 현황"
- 주문 목록이 세로로 배치됨

**주문 아이템 구성 요소:**
각 주문 아이템은 다음 정보를 표시합니다:

1. **주문 시간**
   - 형식: "월 일 시:분" (예: "7월 31일 13:00")
   - 위치: 주문 아이템 상단 또는 좌측

2. **주문 내역**
   - **메뉴명과 수량**: 메뉴 이름과 수량을 함께 표시 (예: "아메리카노(ICE) x 1")
   - **옵션 정보**: 옵션이 있는 경우 함께 표시 (예: "아메리카노(ICE) (샷 추가) x 1")
   - 위치: 주문 시간 하단 또는 우측

3. **주문 금액**
   - 형식: 숫자 + "원" (예: "4,000원")
   - 위치: 주문 내역 옆 또는 하단

4. **주문 접수 버튼**
   - 텍스트: "주문 접수"
   - 위치: 주문 아이템 우측 또는 하단
   - 스타일: 밝은 배경에 어두운 테두리의 사각형 버튼

**주문 상태:**
주문은 다음 상태를 가질 수 있습니다:
- **주문 대기**: 아직 접수되지 않은 주문 (주문 접수 버튼 표시)
- **주문 접수**: 접수 완료된 주문 (버튼이 "제조 중" 또는 숨김 처리)
- **제조 중**: 현재 제조 진행 중인 주문
- **제조 완료**: 제조가 완료된 주문

**기능:**
- 페이지 로드 시 서버에서 주문 목록을 조회하여 표시
- 주문 목록은 최신 순으로 정렬 (최근 주문이 상단)
- "주문 접수" 버튼 클릭 시:
  - 해당 주문의 상태가 "주문 접수"로 변경
  - 주문 접수 API 요청 전송
  - 성공 시:
    - 버튼이 "제조 중" 또는 다른 상태로 변경되거나 숨김 처리
    - 관리자 대시보드 요약 섹션의 통계가 자동으로 업데이트
    - 주문 아이템의 시각적 상태 변경 (색상 변경 등)
  - 실패 시:
    - 에러 메시지 표시
    - 주문 상태 변경 없이 유지
- 주문이 많을 경우:
  - 스크롤 가능한 목록으로 표시
  - 페이지네이션 또는 무한 스크롤 구현 (선택 사항)

**예외 처리:**
- 주문 목록 로드 실패 시 에러 메시지 표시
- 주문 접수 요청 실패 시 에러 메시지 및 재시도 옵션 제공

#### 4.2.6 상호작용 및 상태 관리

**데이터 흐름:**
1. 페이지 로드 시:
   - 서버에서 주문 통계 데이터 조회
   - 서버에서 재고 현황 데이터 조회
   - 서버에서 주문 목록 데이터 조회
   - 모든 데이터를 화면에 표시

2. 재고 수정 시:
   - 사용자가 +/- 버튼 클릭
   - 로컬 상태에서 재고 수량 변경 (낙관적 업데이트)
   - 서버에 재고 업데이트 요청 전송
   - 성공 시 변경사항 유지, 실패 시 원래 값으로 롤백

3. 주문 접수 시:
   - "주문 접수" 버튼 클릭
   - 서버에 주문 상태 업데이트 요청 전송
   - 성공 시:
     - 주문 목록에서 해당 주문의 상태 변경
     - 대시보드 통계 자동 업데이트
   - 실패 시 에러 처리

**상태 관리 항목:**
- 대시보드 통계 데이터
  - 총 주문 수
  - 주문 접수 수
  - 제조 중 수
  - 제조 완료 수
- 재고 데이터 목록
  - 각 메뉴의 재고 수량
- 주문 목록
  - 각 주문 정보: 주문 ID, 주문 시간, 주문 내역, 주문 금액, 주문 상태

**실시간 업데이트:**
- 주문이 새로 생성되면 주문 현황 목록에 자동으로 추가 (폴링 또는 웹소켓)
- 주문 상태 변경 시 대시보드 통계가 자동으로 업데이트

#### 4.2.7 UI/UX 요구사항

**반응형 디자인:**
- 데스크톱: 재고 카드와 주문 목록이 가로로 넓게 배치
- 모바일: 재고 카드들이 세로로 스택되어 배치, 주문 목록도 세로 스크롤

**색상 스키마:**
- 배경: 흰색
- 텍스트: 어두운 회색
- 테두리: 어두운 회색
- 선택된 버튼: 어두운 테두리로 강조

**사용자 경험:**
- 버튼 클릭 시 즉각적인 시각적 피드백 제공 (hover, active 상태)
- 재고 수정 시 숫자가 즉시 업데이트되어 보임
- 주문 접수 시 버튼 상태가 명확하게 변경됨
- 로딩 중일 때 적절한 로딩 인디케이터 표시
- 작업 성공/실패 시 명확한 피드백 메시지 표시

**접근성:**
- 버튼에 명확한 레이블 제공
- 키보드 네비게이션 지원 (선택 사항)
- 충분한 색상 대비 확보

#### 4.2.8 기술적 요구사항

**API 엔드포인트:**
- `GET /api/admin/dashboard`: 대시보드 통계 조회
- `GET /api/admin/inventory`: 재고 현황 조회
- `PUT /api/admin/inventory/:menuId`: 재고 수정
- `GET /api/admin/orders`: 주문 목록 조회 (상태별 필터링 가능)
- `PUT /api/admin/orders/:orderId/status`: 주문 상태 변경 (주문 접수 등)

**데이터 구조:**
```javascript
// 대시보드 통계
{
  totalOrders: number,
  receivedOrders: number,
  inProgressOrders: number,
  completedOrders: number
}

// 재고 아이템
{
  menuId: number,
  menuName: string,
  stock: number
}

// 주문 아이템
{
  orderId: number,
  orderTime: string, // ISO 8601 형식 또는 타임스탬프
  items: [
    {
      menuId: number,
      menuName: string,
      selectedOptions: [string],
      quantity: number,
      price: number
    }
  ],
  totalPrice: number,
  status: 'pending' | 'received' | 'in_progress' | 'completed'
}
```

**보안 고려사항:**
- 관리자 화면은 인증 없이 접근 가능하지만 (학습 목적), 실제 운영 환경에서는 인증이 필요함
- API 엔드포인트에 적절한 권한 검증 추가 고려 (선택 사항)
